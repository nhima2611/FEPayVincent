(this["webpackJsonpberry-material-react-ts"]=this["webpackJsonpberry-material-react-ts"]||[]).push([[22],{413:function(e,t,n){"use strict";var r=n(172);t.a={showToast:function(e,t){Object(r.b)(t,{type:e})}}},424:function(e,t,n){"use strict";var r=n(6),a=n(63),i=n(361),s=n(771),c=n(496),o=n(1),u=["formik","title","disabled","name"];t.a=function(e){var t=e.formik,n=e.title,d=e.disabled,l=void 0!==d&&d,m=e.name,b=void 0===m?"":m,j=Object(a.a)(e,u);return Object(o.jsxs)(i.a,{spacing:1,children:[Object(o.jsx)(s.a,{sx:{color:l?"#CCCCCC":"#4C4C4C",fontWeight:700},children:n}),Object(o.jsx)(c.a,Object(r.a)({fullWidth:!0,name:b,value:t.values[b],onBlur:t.handleBlur,error:t.touched[b]&&Boolean(t.errors[b]),helperText:t.touched[b]&&t.errors[b],onChange:t.handleChange,disabled:l},j))]})}},432:function(e,t,n){"use strict";var r=n(23),a=n(24),i=n(166),s=n(168),c=n(171),o=n(11),u=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this,"/v1/tickets")).downloadTicket=function(e){return o.a.post("/v1/tickets/exportExcel",{ids:e},{responseType:"blob"})},e.deleteTicket=function(e){return o.a.post("/v1/tickets/deleteTickets",{ids:e})},e.uploadTicket=function(e){var t=new FormData;return t.append("file",e),o.a.post("/v1/tickets/import",t,{headers:{"Content-Type":"multipart/form-data"}})},e.addDescription=function(e){return o.a.post("v1/tickets/descriptions",e)},e.addAttachment=function(e){return o.a.post("v1/tickets/attachments",e,{headers:{"Content-Type":"multipart/form-data"}})},e.createTicket=function(e){return o.a.post("v1/tickets",e,{headers:{"Content-Type":"multipart/form-data"}})},e.editTicket=function(e,t){return o.a.post("v1/tickets/draft/".concat(t),e,{headers:{"Content-Type":"multipart/form-data"}})},e.assignTo=function(e){return o.a.post("v1/tickets/assigneesandsupporters",e)},e}return Object(r.a)(n)}(c.a);t.a=new u},488:function(e,t,n){"use strict";var r=n(361),a=n(771),i=n(769),s=n(780),c=n(783),o=n(118),u=n(1);t.a=function(e){var t=e.formik,n=e.title,d=void 0===n?"":n,l=e.data,m=void 0===l?{}:l,b=e.name,j=void 0===b?"":b,h=e.disabled;return Object(u.jsxs)(r.a,{spacing:1,children:[Object(u.jsx)(a.a,{sx:{color:h?"#CCCCCC":"#4C4C4C",fontWeight:700},children:d}),Object(u.jsx)(i.a,{id:j,name:j,defaultValue:t.values[j],value:0===t.values[j]?"":t.values[j],onChange:t.handleChange,disabled:h,children:Object(o.map)(m,(function(e,t){return Object(u.jsx)(s.a,{value:_.toNumber(t),children:e},t)}))}),t.errors[j]&&Object(u.jsx)(c.a,{error:!0,children:t.errors[j]})]})}},558:function(e,t,n){"use strict";var r=n(6),a=n(28),i=n(544),s=n(557),c=n(552),o=n(376),u=n(361),d=n(496),l=n(115),m=n(389),b=n(380),j=n(8),h=n(351),p=n(21),f=n(151),x=n(425),O=n(0),y=n(456),v=n(57),g=n(116),k=n(63),C=n(771),q=n(1),T=["children","horizontal"],R=Object(j.a)((function(e){return Object(q.jsx)(C.a,Object(r.a)({},e))}),{shouldForwardProp:function(e){return"horizontal"!==e}})((function(e){var t=e.theme,n=e.horizontal;return{color:t.palette.text.primary,fontWeight:500,marginBottom:n?0:8}})),w=function(e){var t=e.children,n=e.horizontal,a=Object(k.a)(e,T);return Object(q.jsx)(R,Object(r.a)(Object(r.a)({horizontal:n},a),{},{children:t}))};w.defaultProps={horizontal:!1};var D=w,F=n(419),E=n(488),N=n(424),I=F.c({transaction_type:F.e().required("Transaction Type is Required"),issue_type:F.e().required("Issue Type is Required"),sub_issue_type:F.b().when("issue_type",{is:3,then:F.b().required("Sub Issue Type is Required")}),right_amount:F.e().when("issue_type",{is:2,then:F.b().typeError("Right Amount must be a number").required("Right Amount Number is Required")}),requested_by:F.e().required("Requested By is Required"),ref_number:F.e().required("Ref Number is Required"),transaction_date:F.e().required("Transaction Date is Required"),transaction_amount:F.b().typeError("Transaction Amount must be a number").required("Transaction Amount is Required"),contract_number:F.e().required("Contract Number is Required"),wrong_transaction:F.e().required("Wrong Transaction is Required"),right_contract_number:F.e().required("Right Contract Number is Required"),right_product_type:F.b().when("issue_type",{is:3,then:F.b().required("Right Product Type is Required")}),requester_national_id:F.b().typeError("Requested's Nation ID must be a number").required("Requested's Nation ID is Required"),requester_phone:F.b().typeError("Requester's Phone Number must be a number").min(10,"Phone number should be of minimum 10 characters").required("Requester's Phone Number is Required")}),S={transaction_type:1,issue_type:1,sub_issue_type:0,requested_by:1,ref_number:"",transaction_date:new Date,transaction_amount:"",contract_number:"",wrong_transaction:"",right_contract_number:"",right_amount:"",right_product_type:0,requester_national_id:"",requester_phone:"",status:null,description:"",attachments:[]},V=(t.a=function(e){var t,n=e.onSubmit,j=e.onCancel,h=e.data,k=Object(x.b)({initialValues:S,validationSchema:I,onSubmit:function(e){return n(e)}});Object(O.useEffect)((function(){if(h){var e=_.pickBy(h,(function(e,t){return _.keys(S).includes(t)}));k.setValues(e)}}),[h]),console.log(k),Object(O.useEffect)((function(){3!==k.values.issue_type&&(k.setFieldValue("sub_issue_type",0),k.setFieldValue("right_product_type",0)),2!==k.values.issue_type&&k.setFieldValue("right_amount","")}),[k.values.issue_type]);var C=function(e){var t=e.status;k.isValid&&(k.setFieldValue("status",t),k.setFieldValue("transaction_date",moment(k.values.transaction_date).format("DD/MM/YYYY")))},T=Object(y.a)({onDrop:function(e){k.setFieldValue("attachments",[].concat(Object(a.a)(e),Object(a.a)(k.values.attachments)))},maxFiles:5}),R=T.getRootProps,w=T.getInputProps;return Object(q.jsx)(g.a,{title:_.isEmpty(h)?"Create Ticket":"Edit Ticket",children:Object(q.jsx)("form",{onSubmit:k.handleSubmit,children:Object(q.jsxs)(o.a,{container:!0,spacing:v.b,children:[Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(E.a,{name:"transaction_type",formik:k,title:"Transaction Type",data:f.k})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(E.a,{name:"issue_type",formik:k,title:"Issue Type",data:f.e})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(E.a,{disabled:3!==k.values.issue_type,name:"sub_issue_type",formik:k,title:"Sub Issue Type",data:f.j})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(E.a,{name:"requested_by",formik:k,title:"Requested By",data:f.i})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"REF Number",name:"ref_number"})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsxs)(u.a,{children:[Object(q.jsx)(D,{sx:{color:"#4C4C4C",fontWeight:"bold"},children:"Transaction Date"}),Object(q.jsx)(i.b,{dateAdapter:c.a,children:Object(q.jsx)(s.a,{inputFormat:"dd/MM/yyyy",renderInput:function(e){return Object(q.jsx)(d.a,Object(r.a)({fullWidth:!0},e))},value:k.values.transaction_date,onChange:function(e){return k.setFieldValue("transaction_date",e)}})})]})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"Transaction Amount",name:"transaction_amount"})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"Contract Number",name:"contract_number"})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"Product Type of Wrong Transaction",name:"wrong_transaction"})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"Right Contract Number",name:"right_contract_number"})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"Right Amount",name:"right_amount",disabled:2!==k.values.issue_type})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(E.a,{disabled:3!==k.values.issue_type,name:"right_product_type",formik:k,title:"Product Type of Right Contract #",data:f.g})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"Requester's National ID",name:"requester_national_id"})}),Object(q.jsx)(o.a,{item:!0,xs:12,md:3,children:Object(q.jsx)(N.a,{formik:k,title:"Requester's Phone Number",name:"requester_phone"})}),Object(q.jsx)(o.a,{item:!0,xs:12,children:Object(q.jsx)(N.a,{formik:k,title:"Description",multiline:!0,rows:4,placeholder:"Enter Description",name:"description"})}),Object(q.jsxs)(o.a,{item:!0,xs:12,children:[Object(q.jsx)(V,Object(r.a)(Object(r.a)({sx:{padding:3,backgroundColor:"rgba(39, 174, 96, .15)",cursor:"pointer"}},R({className:"dropzone"})),{},{children:Object(q.jsxs)(u.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1,children:[Object(q.jsx)(P,Object(r.a)({id:"contained-button-file"},w())),Object(q.jsx)(p.u,{}),Object(q.jsx)(l.a,{children:"Browse or Drop file here"})]})})),null===(t=k.values.attachments)||void 0===t?void 0:t.map((function(e,t){return Object(q.jsxs)(u.a,{direction:"row",alignItems:"center",children:[Object(q.jsxs)("li",{style:{margin:"8px 4px"},children:[e.path||e.name," - ",e.size," bytes"]}),Object(q.jsx)(m.a,{onClick:function(){return function(e){var t=k.values.attachments.filter((function(t,n){return n!==e}));k.setFieldValue("attachments",t)}(t)},children:Object(q.jsx)(p.y,{})})]},t)}))]}),Object(q.jsxs)(o.a,{item:!0,sx:{display:"flex",justifyContent:"flex-end"},xs:12,children:[Object(q.jsx)(b.a,{variant:"contained",sx:{background:"#999999"},onClick:j,children:"Cancel"}),Object(q.jsx)(b.a,{variant:"contained",sx:{marginX:1,background:"#2F80ED"},type:"submit",onClick:function(){return C({status:0})},children:"Save as Draft"}),Object(q.jsx)(b.a,{sx:{background:"#27AE60"},variant:"contained",type:"submit",onClick:function(){return C({status:1})},children:"Submit"})]})]})})})},Object(j.a)(h.a)({backgroundImage:"url(\n        \"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='14' ry='14' stroke='%23CCCCCCFF' stroke-width='4' stroke-dasharray='6%2c 14' stroke-dashoffset='0' stroke-linecap='round'/%3e%3c/svg%3e\"\n        )",borderRadius:14})),P=Object(j.a)("input")({display:"none"})},757:function(e,t,n){"use strict";n.r(t);var r=n(102),a=n(22),i=n(432),s=n(413),c=n(558),o=n(1);t.default=function(){var e=Object(a.f)(),t=Object(r.useMutation)((function(e){return i.a.createTicket(e)}),{onSuccess:function(t){s.a.showToast("success","Upload Success!"),e(-1)},onError:function(e){s.a.showToast("error",e.message)}});return Object(o.jsx)(c.a,{onSubmit:function(e){var n=e.attachments,r=new FormData;n.forEach((function(e,t){r.append("attachments[]",e)})),_.forEach(_.omit(e,"attachments"),(function(e,t){r.append("".concat(t),e)})),t.mutate(r)},onCancel:function(){return e(-1)}})}}}]);
//# sourceMappingURL=22.da86ab22.chunk.js.map