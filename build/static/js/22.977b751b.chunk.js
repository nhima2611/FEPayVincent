(this["webpackJsonpberry-material-react-ts"]=this["webpackJsonpberry-material-react-ts"]||[]).push([[22],{411:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(25),a=r(26),i=r(162),s=r.n(i),c=r(12),o=function(){function e(t){Object(n.a)(this,e),this.apiName=t}return Object(a.a)(e,[{key:"getAll",value:function(e){return c.a.get("".concat(this.apiName,"?").concat(e))}},{key:"getById",value:function(e,t){return c.a.get("".concat(this.apiName,"/").concat(e),{params:{filter:JSON.stringify(t)}})}},{key:"delete",value:function(e){return c.a.delete("".concat(this.apiName,"/").concat(e))}},{key:"updatePatch",value:function(e){return c.a.patch("".concat(this.apiName,"/").concat(e.id),e)}},{key:"updatePut",value:function(e){return e=this.convertDateStringsToDates(e),c.a.put("".concat(this.apiName,"/").concat(e.id),e)}},{key:"insert",value:function(e){return e=s.a.omit(e,["id"]),e=this.convertDateStringsToDates(e),c.a.post("".concat(this.apiName),e)}},{key:"convertDateStringsToDates",value:function(e){if("object"!==typeof e)return e;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];moment(r,moment.ISO_8601).isValid()?e[t]=moment(r).format("yyyy-MM-DD hh:mm:ss").toString():"object"===typeof r&&this.convertDateStringsToDates(r)}return e}}]),e}()},412:function(e,t,r){"use strict";var n=r(166);t.a={showToast:function(e,t){Object(n.b)(t,{type:e})}}},437:function(e,t,r){"use strict";var n=r(6),a=r(64),i=r(356),s=r(768),c=r(495),o=r(1),u=["formik","title","disabled","name"];t.a=function(e){var t=e.formik,r=e.title,d=e.disabled,l=void 0!==d&&d,m=e.name,b=void 0===m?"":m,h=Object(a.a)(e,u);return Object(o.jsxs)(i.a,{spacing:1,children:[Object(o.jsx)(s.a,{sx:{color:l?"#CCCCCC":"#4C4C4C",fontWeight:700},children:r}),Object(o.jsx)(c.a,Object(n.a)({fullWidth:!0,name:b,value:t.values[b],onBlur:t.handleBlur,error:t.touched[b]&&Boolean(t.errors[b]),helperText:t.touched[b]&&t.errors[b],onChange:t.handleChange,disabled:l},h))]})}},441:function(e,t,r){"use strict";var n=r(26),a=r(25),i=r(407),s=r(408),c=r(411),o=r(12),u=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.call(this,"/v1/tickets")).downloadTicket=function(e){return o.a.post("/v1/tickets/exportExcel",{ids:e},{responseType:"blob"})},e.deleteTicket=function(e){return o.a.post("/v1/tickets/deleteTickets",{ids:e})},e.uploadTicket=function(e){var t=new FormData;return t.append("file",e),o.a.post("/v1/tickets/import",t,{headers:{"Content-Type":"multipart/form-data"}})},e.addDescription=function(e){return o.a.post("v1/tickets/descriptions",e)},e.addAttachment=function(e){return o.a.post("v1/tickets/attachments",e,{headers:{"Content-Type":"multipart/form-data"}})},e.createTicket=function(e){return o.a.post("v1/tickets",e,{headers:{"Content-Type":"multipart/form-data"}})},e.assignTo=function(e){return o.a.post("v1/tickets/assigneesandsupporters",e)},e}return Object(n.a)(r)}(c.a);t.a=new u},550:function(e,t,r){"use strict";var n=r(356),a=r(768),i=r(767),s=r(779),c=r(782),o=r(162),u=r(1);t.a=function(e){var t=e.formik,r=e.title,d=void 0===r?"":r,l=e.data,m=void 0===l?{}:l,b=e.name,h=void 0===b?"":b,j=e.disabled;return Object(u.jsxs)(n.a,{spacing:1,children:[Object(u.jsx)(a.a,{sx:{color:j?"#CCCCCC":"#4C4C4C",fontWeight:700},children:d}),Object(u.jsx)(i.a,{id:h,name:h,defaultValue:t.values[h],value:t.values[h],onChange:t.handleChange,disabled:j,children:Object(o.map)(m,(function(e,t){return Object(u.jsx)(s.a,{value:_.toNumber(t),children:e},t)}))}),t.errors[h]&&Object(u.jsx)(c.a,{error:!0,children:t.errors[h]})]})}},769:function(e,t,r){"use strict";r.r(t);var n=r(147),a=r(441),i=r(412),s=r(6),c=r(544),o=r(558),u=r(553),d=r(371),l=r(356),m=r(495),b=r(116),h=r(384),j=r(375),p=r(8),f=r(346),x=r(21),O=r(148),y=r(425),g=r(0),v=r(466),k=r(45),C=r(89),q=r(64),T=r(768),R=r(1),w=["children","horizontal"],D=Object(p.a)((function(e){return Object(R.jsx)(T.a,Object(s.a)({},e))}),{shouldForwardProp:function(e){return"horizontal"!==e}})((function(e){var t=e.theme,r=e.horizontal;return{color:t.palette.text.primary,fontWeight:500,marginBottom:r?0:8}})),N=function(e){var t=e.children,r=e.horizontal,n=Object(q.a)(e,w);return Object(R.jsx)(D,Object(s.a)(Object(s.a)({horizontal:r},n),{},{children:t}))};N.defaultProps={horizontal:!1};var S=N,F=r(422),E=r(550),I=r(437),P=F.c({transaction_type:F.e().required("Transaction Type is Required"),issue_type:F.e().required("Issue Type is Required"),sub_issue_type:F.b().when("issue_type",{is:3,then:F.b().required("Sub Issue Type is Required")}),right_amount:F.e().when("issue_type",{is:2,then:F.b().typeError("Right Amount must be a number").required("Right Amount Number is Required")}),requested_by:F.e().required("Requested By is Required"),ref_number:F.e().required("Ref Number is Required"),transaction_date:F.a().required("Transaction Date is Required"),transaction_amount:F.b().typeError("Transaction Amount must be a number").required("Transaction Amount is Required"),contract_number:F.e().required("Contract Number is Required"),wrong_transaction:F.e().required("Wrong Transaction is Required"),right_contract_number:F.b().typeError("Right Contract Number must be a number").required("Right Contract Number is Required"),right_product_type:F.b().when("issue_type",{is:3,then:F.b().required("Right Product Type is Required")}),requester_national_id:F.b().typeError("Requested's Nation ID must be a number").required("Requested's Nation ID is Required"),requester_phone:F.b().typeError("Requester's Phone Number must be a number").min(10,"Phone number should be of minimum 10 characters").required("Requester's Phone Number is Required")}),V=function(e){var t=e.onSubmit,r=Object(y.b)({initialValues:{transaction_type:1,issue_type:1,sub_issue_type:0,requested_by:1,ref_number:"",transaction_date:new Date,transaction_amount:"",contract_number:"",wrong_transaction:"",right_contract_number:"",right_amount:"",right_product_type:0,requester_national_id:"",requester_phone:"",status:null,description:"",attachments:[]},validationSchema:P,onSubmit:function(e){return t(e)}});Object(g.useEffect)((function(){3!==r.values.issue_type&&(r.setFieldValue("sub_issue_type",0),r.setFieldValue("right_product_type",0)),2!==r.values.issue_type&&r.setFieldValue("right_amount","")}),[r.values.issue_type]);var n=function(e){var t=e.status;r.isValid&&r.setFieldValue("status",t)},a=Object(v.a)({onDrop:function(e){r.setFieldValue("attachments",e)},maxFiles:5}),i=a.getRootProps,p=a.getInputProps;return Object(R.jsx)(C.a,{title:"Create Ticket",children:Object(R.jsx)("form",{onSubmit:r.handleSubmit,children:Object(R.jsxs)(d.a,{container:!0,spacing:k.b,children:[Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(E.a,{name:"transaction_type",formik:r,title:"Transaction Type",data:O.k})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(E.a,{name:"issue_type",formik:r,title:"Issue Type",data:O.e})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(E.a,{disabled:3!==r.values.issue_type,name:"sub_issue_type",formik:r,title:"Sub Issue Type",data:O.j})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(E.a,{name:"requested_by",formik:r,title:"Requested By",data:O.i})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"REF Number",name:"ref_number"})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsxs)(l.a,{children:[Object(R.jsx)(S,{sx:{color:"#4C4C4C",fontWeight:"bold"},children:"Transaction Date"}),Object(R.jsx)(c.b,{dateAdapter:u.a,children:Object(R.jsx)(o.a,{inputFormat:"dd/MM/yyyy",renderInput:function(e){return Object(R.jsx)(m.a,Object(s.a)({fullWidth:!0},e))},value:r.values.transaction_date,onChange:function(e){return r.setFieldValue("transaction_date",e)}})})]})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"Transaction Amount",name:"transaction_amount"})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"Contract Number",name:"contract_number"})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"Product Type of Wrong Transaction",name:"wrong_transaction"})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"Right Contract Number",name:"right_contract_number"})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"Right Amount",name:"right_amount",disabled:2!==r.values.issue_type})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(E.a,{disabled:3!==r.values.issue_type,name:"right_product_type",formik:r,title:"Product Type of Right Contract #",data:O.g})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"Requester's National ID",name:"requester_national_id"})}),Object(R.jsx)(d.a,{item:!0,xs:12,md:3,children:Object(R.jsx)(I.a,{formik:r,title:"Requester's Phone Number",name:"requester_phone"})}),Object(R.jsx)(d.a,{item:!0,xs:12,children:Object(R.jsx)(I.a,{formik:r,title:"Description",multiline:!0,rows:4,placeholder:"Enter Description",name:"description"})}),Object(R.jsxs)(d.a,{item:!0,xs:12,children:[Object(R.jsx)(A,Object(s.a)(Object(s.a)({sx:{padding:3,backgroundColor:"rgba(39, 174, 96, .15)",cursor:"pointer"}},i({className:"dropzone"})),{},{children:Object(R.jsxs)(l.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1,children:[Object(R.jsx)(z,Object(s.a)({id:"contained-button-file"},p())),Object(R.jsx)(x.v,{}),Object(R.jsx)(b.a,{children:"Browse or Drop file here"})]})})),r.values.attachments.map((function(e,t){return Object(R.jsxs)(l.a,{direction:"row",alignItems:"center",children:[Object(R.jsxs)("li",{style:{margin:"8px 4px"},children:[e.path," - ",e.size," bytes"]}),Object(R.jsx)(h.a,{onClick:function(){return function(e){var t=r.values.attachments.filter((function(t,r){return r!==e}));r.setFieldValue("attachments",t)}(t)},children:Object(R.jsx)(x.z,{})})]},t)}))]}),Object(R.jsxs)(d.a,{item:!0,sx:{display:"flex",justifyContent:"flex-end"},xs:12,children:[Object(R.jsx)(j.a,{variant:"contained",sx:{background:"#999999"},children:"Cancel"}),Object(R.jsx)(j.a,{variant:"contained",sx:{marginX:1,background:"#2F80ED"},type:"submit",onClick:function(){return n({status:0})},children:"Save as Draft"}),Object(R.jsx)(j.a,{sx:{background:"#27AE60"},variant:"contained",type:"submit",onClick:function(){return n({status:1})},children:"Submit"})]})]})})})},A=Object(p.a)(f.a)({backgroundImage:"url(\n        \"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='14' ry='14' stroke='%23CCCCCCFF' stroke-width='4' stroke-dasharray='6%2c 14' stroke-dashoffset='0' stroke-linecap='round'/%3e%3c/svg%3e\"\n        )",borderRadius:14}),z=Object(p.a)("input")({display:"none"});t.default=function(){var e=Object(n.useMutation)((function(e){return a.a.createTicket(e)}),{onSuccess:function(e){i.a.showToast("success","Upload Success!")},onError:function(e){i.a.showToast("error",e.message)}});return Object(R.jsx)(V,{onSubmit:function(t){var r=t.attachments,n=new FormData;r.forEach((function(e,t){n.append("attachments[]",e)})),_.forEach(_.omit(t,"attachments"),(function(e,t){n.append("".concat(t),e)})),e.mutate(n)}})}}}]);
//# sourceMappingURL=22.977b751b.chunk.js.map