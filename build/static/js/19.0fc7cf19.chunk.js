(this["webpackJsonpberry-material-react-ts"]=this["webpackJsonpberry-material-react-ts"]||[]).push([[19],{410:function(e,t,n){"use strict";var a=n(443),c=n.n(a);t.a=new c.a},414:function(e,t,n){"use strict";var a=n(173);t.a={showToast:function(e,t){Object(a.b)(t,{type:e})}}},446:function(e,t,n){"use strict";var a=n(64),c=n(6),o=n(28),i=n(13),r=n(468),s=n.n(r),l=n(509),d=n(510),u=n(511),j=n(512),b=n(513),O=n(598),p=n(352),f=n(514),h=n(557),g=n(555),x=n(592),v=n(170),m=n(0),w=n.n(m),C=n(467),y=n(410),S=n(1),E=["indeterminate"];t.a=function(e){var t=e.data,n=e.columns,a=e.onClickRowItem,r=e.showCustomFilter,g=void 0!==r&&r,E=e.rowId,k=w.a.useMemo((function(){return{text:function(e,t,n){return e.filter((function(e){var a=null===e||void 0===e?void 0:e.values[t];return void 0===a||String(a).toLowerCase().startsWith(String(n).toLowerCase())}))}}}),[]),_=Object(m.useContext)(v.b),T=Object(i.a)(_,2),R=T[0],A=R.queryPageIndex,I=R.queryPageSize,L=R.totalCount,D=T[1],H=Object(C.useTable)({columns:n,data:t,initialState:{pageIndex:A,pageSize:I},manualSortBy:!0,disableSortRemove:!0,manualPagination:!0,manualFilters:!0,pageCount:L,filterTypes:k,autoResetSelectedRows:!1,getRowId:function(e){return e[E]}},C.useFilters,C.useSortBy,C.usePagination,C.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return Object(S.jsx)("div",{children:Object(S.jsx)(P,Object(c.a)({},t()))})},Cell:function(e){var t=e.row;return Object(S.jsx)("div",{children:Object(S.jsx)(P,Object(c.a)({},t.getToggleRowSelectedProps()))})}}].concat(Object(o.a)(e))}))})),z=H.getTableProps,F=H.getTableBodyProps,G=H.headerGroups,B=H.prepareRow,N=H.page,W=(H.canPreviousPage,H.canNextPage,H.pageOptions),M=(H.pageCount,H.gotoPage),U=(H.nextPage,H.previousPage,H.setPageSize),q=(H.selectedFlatRows,H.toggleAllPageRowsSelected),J=H.state,Y=J.pageIndex,K=J.pageSize,Q=J.sortBy,V=J.filters,X=J.selectedRowIds,Z=function(e){e&&q(!1)};w.a.useEffect((function(){y.a.addListener("DESELECT_ALL_ROWS",Z)}),[]),w.a.useEffect((function(){D({type:"PAGE_SIZE_CHANGED",payload:K}),M(0)}),[K,M]),w.a.useEffect((function(){X&&D({type:"SELECTED_CHANGE",payload:X})}),[X]),w.a.useEffect((function(){Q&&D({type:"SORT_BY_OBJECT_CHANGED",payload:Q})}),[Q]),w.a.useEffect((function(){V&&D({type:"FILTERS_CHANGED",payload:V})}),[V]);var $=Y>0?Math.max(0,(1+Y)*K-W.length):0,ee=w.a.useState(!1),te=Object(i.a)(ee,1)[0];return Object(S.jsxs)("div",{children:[Object(S.jsx)(u.a,Object(c.a)(Object(c.a)({},z()),{},{children:Object(S.jsxs)(j.a,{"aria-labelledby":"tableTitle",size:te?"small":"medium",children:[Object(S.jsx)(b.a,{children:G.map((function(e){return Object(S.jsx)(l.a,Object(c.a)(Object(c.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(S.jsx)(d.a,Object(c.a)(Object(c.a)({},"selection"===e.id?e.getHeaderProps():e.getHeaderProps(e.getSortByToggleProps())),{},{sx:{padding:.5},children:Object(S.jsxs)(O.a,{active:e.isSorted,direction:e.isSortedDesc?"desc":"asc",IconComponent:s.a,children:[e.render("Header"),"selection"!==e.id?Object(S.jsx)(p.a,{component:"span",sx:x.a,children:e.isSortedDesc?"sorted descending":"sorted ascending"}):null]})}))}))}))}))}),g&&Object(S.jsx)(b.a,{children:G.map((function(e){return Object(S.jsx)(l.a,Object(c.a)(Object(c.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return"selection"===e.id?Object(S.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getHeaderProps()),{},{children:"Filter"})):Object(S.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getHeaderProps()),{},{sx:{minWidth:200,px:1},children:e.canFilter?e.render("Filter"):null}))}))}))}))}),Object(S.jsxs)(f.a,Object(c.a)(Object(c.a)({},F()),{},{children:[!Boolean(t.length)&&Object(S.jsx)(l.a,{children:Object(S.jsx)(d.a,{sx:{textAlign:"left"},colSpan:n.length+1,children:"Empty Data"})}),N.map((function(e){return B(e),Object(S.jsx)(l.a,Object(c.a)(Object(c.a)({hover:!0},e.getRowProps()),{},{onClick:function(){return a(e)},sx:{textDecoration:"none",cursor:"pointer"},children:e.cells.map((function(e){return Object(S.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getCellProps()),{},{sx:{padding:.5},children:e.render("Cell")}))}))}))})),$>0&&Object(S.jsx)(l.a,{style:{height:(te?33:53)*$},children:Object(S.jsx)(d.a,{colSpan:n.length+1})})]}))]})})),Object(S.jsx)(h.a,{component:"div",rowsPerPageOptions:[10,15,20],count:W.length,rowsPerPage:K,page:Y,onPageChange:function(e,t){M(t),D({type:"PAGE_CHANGED",payload:t})},onRowsPerPageChange:function(e){U(Number(e.target.value))}})]})};var P=w.a.forwardRef((function(e,t){var n=e.indeterminate,o=Object(a.a)(e,E),i=w.a.useRef(),r=t||i;return w.a.useEffect((function(){r.current.indeterminate=n}),[r,n]),Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(g.a,Object(c.a)(Object(c.a)({ref:r},o),{},{onClick:function(e){e.stopPropagation()}}))})}))},469:function(e,t,n){"use strict";var a=n(23),c=n(24),o=n(167),i=n(169),r=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"/v1/partners")}return Object(a.a)(n)}(n(172).a);t.a=new r},490:function(e,t,n){"use strict";var a=n(6),c=n(13),o=n(5),i=n(387),r=n(116),s=n(362),l=n(597),d=n(381),u=n(352),j=n(388),b=n(8),O=n(34),p=n(166),f=n(21),h=n(170),g=n(77),x=n(0),v=n(38),m=n(410),w=n(1),C=Object(b.a)(i.a,{shouldForwardProp:p.b})((function(e){var t,n=e.theme;return t={width:434,height:36,marginLeft:16,marginRight:16,paddingLeft:16,paddingRight:16,"& input":{background:"transparent !important",paddingLeft:"4px !important"}},Object(o.a)(t,n.breakpoints.down("lg"),{width:250}),Object(o.a)(t,n.breakpoints.down("md"),{width:100,background:"dark"===n.palette.mode?n.palette.dark[800]:"#fff"}),t})),y=Object(b.a)("input")({display:"none"});t.a=function(e){var t=e.onClickUser,n=e.urlAddTicket,o=e.onClickDownload,i=e.onUploadFile,b=e.onClickTrash,p=e.title,E=void 0===p?"Partner List":p,P=Object(O.a)(),k=(Object(g.a)().user,Object(x.useContext)(h.b)),T=Object(c.a)(k,1)[0].selectedIds,R=Object(x.useState)(""),A=Object(c.a)(R,2),I=A[0],L=A[1];Object(x.useEffect)((function(){m.a.emit("SEARCH_TICKET_LIST",{value:I})}),[I]);var D=function(e){null===i||void 0===i||i(e.target.files[0])};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(r.a,{sx:{mb:1},children:"".concat(E," - ").concat(_.keys(T).length," Selected")}),Object(w.jsxs)(s.a,{direction:"row",spacing:1.5,sx:{marginBottom:1},children:[Object(w.jsx)(l.a,{title:"Download",children:Object(w.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},S.btn),{},{minWidth:36,padding:0}),variant:"outlined",onClick:o,children:Object(w.jsx)(f.i,{size:18})})}),Object(w.jsx)(l.a,{title:"Upload",children:Object(w.jsxs)("label",{style:{display:"flex"},htmlFor:"contained-button-file",children:[Object(w.jsx)(y,{accept:".xlsx, .xls, .csv",type:"file",id:"contained-button-file",onChange:D,onClick:function(e){e.target.value=null}}),Object(w.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},S.btn),{},{minWidth:36,padding:0}),component:"span",variant:"outlined",children:Object(w.jsx)(f.v,{size:18})})]})}),Object(w.jsx)(l.a,{title:"Delete",children:Object(w.jsx)(d.a,{onClick:b,sx:Object(a.a)(Object(a.a)({},S.btn),{},{minWidth:36,padding:0}),variant:"outlined",children:Object(w.jsx)(f.u,{size:18})})}),Object(w.jsx)(l.a,{title:"Toggle Mode",children:Object(w.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},S.btn),{},{minWidth:36,padding:0}),variant:"outlined",onClick:t,children:Object(w.jsx)(f.w,{size:18})})}),Object(w.jsx)(u.a,{sx:{flexGrow:1}}),Object(w.jsx)(u.a,{children:Object(w.jsx)(C,{id:"input-search-header",value:I,onChange:function(e){return L(e.target.value)},placeholder:"Search",startAdornment:Object(w.jsx)(j.a,{position:"start",children:Object(w.jsx)(f.p,{stroke:1.5,size:"1rem",color:P.palette.grey[500]})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"},sx:{height:36}})}),Object(w.jsx)(d.a,{variant:"outlined",sx:{borderColor:"#E5E5E5",color:"#008345",borderRadius:2,height:36,fontSize:12,fontWeight:"bold"},startIcon:Object(w.jsx)(f.o,{color:"#008345",size:18}),component:v.b,to:n,children:"Add New"})]})]})};var S={btn:{borderColor:"#E5E5E5",height:36}}},771:function(e,t,n){"use strict";n.r(t);var a=n(13),c=n(352),o=n(377),i=n(490),r=n(170),s=n(0),l=n.n(s),d=n(103),u=n(22);function j(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function b(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var O="undefined"!==typeof window,p=function(e,t){return new URLSearchParams(e).get(t)},f=O?function(e){var t=window.location,n=Object(s.useState)((function(){return p(t.search,e)})),a=n[0],c=n[1];return Object(s.useEffect)((function(){var n=function(){c(p(t.search,e))};return j(window,"popstate",n),j(window,"pushstate",n),j(window,"replacestate",n),function(){b(window,"popstate",n),b(window,"pushstate",n),b(window,"replacestate",n)}}),[]),a}:function(){return null},h=n(469),g=n(117),x=n(410),v=n(414),m=n(28),w=n(390),C=n(733),y=n(781),S=n(21),E=n(446),P=n(119),k=n(1),T=function(e){var t=e.data,n=void 0===t?[]:t,c=e.loading,o=e.cols,i=void 0===o?[]:o,r=e.onClickRowItem,d=Object(s.useState)(null),u=Object(a.a)(d,2),j=u[0],b=u[1],O=function(e){e.stopPropagation(),b(null===e||void 0===e?void 0:e.currentTarget)},p=function(){b(null)},f=l.a.useMemo((function(){return i[0]?i.map((function(e){return"action"===e?{Header:Object(P.startCase)(Object(P.camelCase)(e)),accessor:e,Cell:function(e){e.value;return Object(k.jsx)(w.a,{onClick:O,children:Object(k.jsx)(S.h,{})})},Filter:""}:{Header:Object(P.startCase)(Object(P.camelCase)(e)),accessor:e,Cell:function(e){var t=e.value;return Object(k.jsx)("div",{style:{maxHeight:40,overflow:"hidden"},children:t})},Filter:""}})):[]}),[i]),h=l.a.useMemo((function(){return Object(m.a)(n)}),[n]);return Object(k.jsxs)(g.a,{content:!1,border:!1,children:[Object(k.jsxs)(C.a,{id:"menu-followers-card",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:p,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(k.jsx)(y.a,{onClick:p,sx:{color:"#27AE60",fontSize:12,fontWeight:500},children:"Edit"}),Object(k.jsx)(y.a,{onClick:p,sx:{color:"#808080",fontSize:12,fontWeight:500},children:"View"}),Object(k.jsx)(y.a,{onClick:p,sx:{color:"#FF0015",fontSize:12,fontWeight:500},children:"Delete"})]}),c?Object(k.jsx)("div",{children:"loading..."}):Object(k.jsx)(E.a,{rowId:"partner_id",onClickRowItem:r,data:h,columns:f})]})};t.default=function(){var e,t,n=Object(s.useContext)(r.b),l=Object(a.a)(n,2),j=l[0],b=j.queryPageIndex,O=j.queryPageSize,p=j.sortByObject,m=j.filters,w=(j.selectedIds,j.resetState,l[1]),C=Object(s.useState)(""),y=Object(a.a)(C,2),S=y[0],E=y[1],P=f("f"),R=Object(d.useQuery)(["partner_table",b,O,S,p,m],(function(){var e,t,n,a="per_page=".concat(O,"&page=").concat(b+1),c=0===(null===S||void 0===S?void 0:S.length)?"":"&keyword=".concat(S),o="view_type=".concat(1),i=Boolean(p.length)?"&order_by=".concat(null!==(e=null===(t=p[0])||void 0===t?void 0:t.id)&&void 0!==e?e:"ticket_id","&sorted_by=").concat(null!==(n=p[0])&&void 0!==n&&n.desc?"desc":"asc"):"",r=Boolean(m)?_.map(m,(function(e){var t=["created_date","last_status_date"].includes(e.id);return"&".concat(e.id,"=").concat(t?moment(e.value).format("DD/MM/YYYY"):e.value)})).join(""):"";return h.a.getAll("".concat(a).concat(c,"&").concat(o).concat(i).concat(r))}),{keepPreviousData:!0,onError:function(e){v.a.showToast("error",e.message)},onSuccess:function(e){var t,n,a;w({type:"TOTAL_COUNT_CHANGED",payload:null===(t=e.data)||void 0===t||null===(n=t.meta)||void 0===n||null===(a=n.pagination)||void 0===a?void 0:a.total})}}),A=R.isLoading,I=R.data,L=(R.refetch,Object(u.f)()),D=_.debounce((function(e){var t=e.value;E(t)}),1500,{maxWait:1500});Object(s.useEffect)((function(){return x.a.addListener("SEARCH_TICKET_LIST",D),function(){x.a.removeAllListeners()}}),[]),Object(s.useEffect)((function(){var e,t;P&&(w({type:"PAGE_CHANGED",payload:(null===(e=JSON.parse(P))||void 0===e?void 0:e.queryPageIndex)||0}),E((null===(t=JSON.parse(P))||void 0===t?void 0:t.keyword)||""))}),[P]);return Object(k.jsx)(c.a,{sx:{display:"flex"},children:Object(k.jsx)(o.a,{container:!0,children:Object(k.jsx)(o.a,{item:!0,xs:12,children:Object(k.jsxs)(g.a,{contentSX:{p:2},children:[Object(k.jsx)(i.a,{onClickDownload:function(){},onClickUser:function(){},urlAddTicket:"create",onUploadFile:function(){},onClickTrash:function(){}}),Object(k.jsx)(T,{onClickRowItem:function(e){var t,n;console.log(e),L(null===(t=e.values)||void 0===t||null===(n=t.partner_id)||void 0===n?void 0:n.toString())},loading:A,data:null===I||void 0===I||null===(e=I.data)||void 0===e?void 0:e.data,cols:null===I||void 0===I||null===(t=I.data)||void 0===t?void 0:t.cols})]})})})})}}}]);
//# sourceMappingURL=19.0fc7cf19.chunk.js.map