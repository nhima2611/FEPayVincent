(this["webpackJsonpfe-react-ts"]=this["webpackJsonpfe-react-ts"]||[]).push([[20],{416:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(25),o=n(26),r=n(164),i=n.n(r),c=n(12),s=function(){function e(t){Object(a.a)(this,e),this.apiName=t}return Object(o.a)(e,[{key:"getAll",value:function(e){var t=e?"?".concat(e):"";return c.a.get("".concat(this.apiName).concat(t))}},{key:"getById",value:function(e,t){return c.a.get("".concat(this.apiName,"/").concat(e),{params:{filter:JSON.stringify(t)}})}},{key:"delete",value:function(e){return c.a.delete("".concat(this.apiName,"/").concat(e))}},{key:"updatePatch",value:function(e){return c.a.patch("".concat(this.apiName,"/").concat(e.id),e)}},{key:"updatePut",value:function(e){return e=this.convertDateStringsToDates(e),c.a.put("".concat(this.apiName,"/").concat(e.id),e)}},{key:"insert",value:function(e){return e=i.a.omit(e,["id"]),e=this.convertDateStringsToDates(e),c.a.post("".concat(this.apiName),e)}},{key:"convertDateStringsToDates",value:function(e){if("object"!==typeof e)return e;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];moment(n,moment.ISO_8601).isValid()?e[t]=moment(n).format("yyyy-MM-DD hh:mm:ss").toString():"object"===typeof n&&this.convertDateStringsToDates(n)}return e}}]),e}()},420:function(e,t,n){"use strict";var a=n(11),o=n(6),r=n(4),i=n.n(r),c=n(457),s=n.n(c),u=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.fire({backdrop:!0,title:t.title||"Are you sure?",text:"You won't be able to revert this!",icon:"info",showCancelButton:!0,confirmButtonText:null!==(n=t.confirmButtonText)&&void 0!==n?n:"Ok",denyButtonText:null!==(a=t.denyButtonText)&&void 0!==a?a:"Cancel"}).then((function(e){var n,a,o;return e.isConfirmed?null===(a=t.onConfirm)||void 0===a?void 0:a.call(t):e.isDenied?null===(o=t.onDenied)||void 0===o?void 0:o.call(t):null===(n=t.onDenied)||void 0===n?void 0:n.call(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a={toast:function(e,t,n){var a="#ffffff";switch(e){case"success":a="#5cb85c";break;case"error":a="#d9534f"}return s.a.fire({icon:e,title:t,toast:!0,position:n||"bottom-end",background:a,color:"white",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",s.a.stopTimer),e.addEventListener("mouseleave",s.a.resumeTimer)}})},showConfirm:u,showDeleteConfirm:function(e){return s.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){var n,a,o;return t.isConfirmed?null===(a=e.onConfirm)||void 0===a?void 0:a.call(e):t.isDenied?null===(o=e.onDenied)||void 0===o?void 0:o.call(e):null===(n=e.onDenied)||void 0===n?void 0:n.call(e)}))},showError:function(e){return s.a.fire(Object(o.a)(Object(o.a)({},e),{},{icon:"error"}))},showSuccess:function(e){return s.a.fire(Object(o.a)(Object(o.a)({},e),{},{icon:"success"}))},showLoading:function(){return s.a.fire({title:"Loading",timerProgressBar:!0})},showInfo:function(e){return s.a.fire(Object(o.a)(Object(o.a)({},e),{},{icon:"info"}))},showWarning:function(e){return s.a.fire(Object(o.a)(Object(o.a)({},e),{},{icon:"warning"}))}}},468:function(e,t,n){"use strict";var a=n(6),o=n(64),r=n(361),i=n(801),c=n(475),s=n(1),u=["formik","title","disabled","name"];t.a=function(e){var t=e.formik,n=e.title,l=e.disabled,d=void 0!==l&&l,b=e.name,f=void 0===b?"":b,p=Object(o.a)(e,u);return Object(s.jsxs)(r.a,{spacing:1,children:[Object(s.jsx)(i.a,{sx:{color:d?"#CCCCCC":"#4C4C4C",fontWeight:700},children:n}),Object(s.jsx)(c.a,Object(a.a)({fullWidth:!0,name:f,value:t.values[f],onBlur:t.handleBlur,error:t.touched[f]&&Boolean(t.errors[f]),helperText:t.touched[f]&&t.errors[f],onChange:t.handleChange,disabled:d},p))]})}},475:function(e,t,n){"use strict";var a=n(2),o=n(7),r=n(0),i=n(9),c=n(148),s=n(306),u=n(8),l=n(14),d=n(785),b=n(786),f=n(385),p=n(801),v=n(814),m=n(815),j=n(800),h=n(87),g=n(99);function O(e){return Object(h.a)("MuiTextField",e)}Object(g.a)("MuiTextField",["root"]);var x=n(1),S=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],w={standard:d.a,filled:b.a,outlined:f.a},y=Object(u.a)(v.a,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),P=r.forwardRef((function(e,t){var n=Object(l.a)({props:e,name:"MuiTextField"}),r=n.autoComplete,u=n.autoFocus,d=void 0!==u&&u,b=n.children,f=n.className,v=n.color,h=void 0===v?"primary":v,g=n.defaultValue,P=n.disabled,_=void 0!==P&&P,C=n.error,I=void 0!==C&&C,k=n.FormHelperTextProps,B=n.fullWidth,L=void 0!==B&&B,E=n.helperText,F=n.id,R=n.InputLabelProps,N=n.inputProps,q=n.InputProps,T=n.inputRef,D=n.label,M=n.maxRows,W=n.minRows,A=n.multiline,G=void 0!==A&&A,V=n.name,Q=n.onBlur,H=n.onChange,z=n.onFocus,U=n.placeholder,J=n.required,Y=void 0!==J&&J,K=n.rows,X=n.select,$=void 0!==X&&X,Z=n.SelectProps,ee=n.type,te=n.value,ne=n.variant,ae=void 0===ne?"outlined":ne,oe=Object(o.a)(n,S),re=Object(a.a)({},n,{autoFocus:d,color:h,disabled:_,error:I,fullWidth:L,multiline:G,required:Y,select:$,variant:ae}),ie=function(e){var t=e.classes;return Object(c.a)({root:["root"]},O,t)}(re);var ce={};"outlined"===ae&&(R&&"undefined"!==typeof R.shrink&&(ce.notched=R.shrink),ce.label=D),$&&(Z&&Z.native||(ce.id=void 0),ce["aria-describedby"]=void 0);var se=Object(s.a)(F),ue=E&&se?"".concat(se,"-helper-text"):void 0,le=D&&se?"".concat(se,"-label"):void 0,de=w[ae],be=Object(x.jsx)(de,Object(a.a)({"aria-describedby":ue,autoComplete:r,autoFocus:d,defaultValue:g,fullWidth:L,multiline:G,name:V,rows:K,maxRows:M,minRows:W,type:ee,value:te,id:se,inputRef:T,onBlur:Q,onChange:H,onFocus:z,placeholder:U,inputProps:N},ce,q));return Object(x.jsxs)(y,Object(a.a)({className:Object(i.a)(ie.root,f),disabled:_,error:I,fullWidth:L,ref:t,required:Y,color:h,variant:ae,ownerState:re},oe,{children:[null!=D&&""!==D&&Object(x.jsx)(p.a,Object(a.a)({htmlFor:se,id:le},R,{children:D})),$?Object(x.jsx)(j.a,Object(a.a)({"aria-describedby":ue,id:se,labelId:le,value:te,input:be},Z,{children:b})):be,E&&Object(x.jsx)(m.a,Object(a.a)({id:ue},k,{children:E}))]}))}));t.a=P},488:function(e,t,n){"use strict";var a=n(5),o=n(7),r=n(2),i=n(0),c=n(10),s=n(168),u=n(148),l=n(8),d=n(14),b=n(380),f=n(316),p=n(87),v=n(99);function m(e){return Object(p.a)("MuiLoadingButton",e)}var j=Object(v.a)("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),h=n(1),g=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],O=Object(l.a)(b.a,{shouldForwardProp:function(e){return function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e&&"classes"!==e}(e)||"classes"===e},name:"MuiLoadingButton",slot:"Root",overridesResolver:function(e,t){return[t.root,t.startIconLoadingStart&&Object(a.a)({},"& .".concat(j.startIconLoadingStart),t.startIconLoadingStart),t.endIconLoadingEnd&&Object(a.a)({},"& .".concat(j.endIconLoadingEnd),t.endIconLoadingEnd)]}})((function(e){var t=e.ownerState,n=e.theme;return Object(r.a)(Object(a.a)({},"& .".concat(j.startIconLoadingStart,", & .").concat(j.endIconLoadingEnd),{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0}),"center"===t.loadingPosition&&Object(a.a)({transition:n.transitions.create(["background-color","box-shadow","border-color"],{duration:n.transitions.duration.short})},"&.".concat(j.loading),{color:"transparent"}),"start"===t.loadingPosition&&t.fullWidth&&Object(a.a)({},"& .".concat(j.startIconLoadingStart,", & .").concat(j.endIconLoadingEnd),{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0,marginRight:-8}),"end"===t.loadingPosition&&t.fullWidth&&Object(a.a)({},"& .".concat(j.startIconLoadingStart,", & .").concat(j.endIconLoadingEnd),{transition:n.transitions.create(["opacity"],{duration:n.transitions.duration.short}),opacity:0,marginLeft:-8}))})),x=Object(l.a)("div",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:function(e,t){var n=e.ownerState;return[t.loadingIndicator,t["loadingIndicator".concat(Object(c.a)(n.loadingPosition))]]}})((function(e){var t=e.theme,n=e.ownerState;return Object(r.a)({position:"absolute",visibility:"visible",display:"flex"},"start"===n.loadingPosition&&("outlined"===n.variant||"contained"===n.variant)&&{left:14},"start"===n.loadingPosition&&"text"===n.variant&&{left:6},"center"===n.loadingPosition&&{left:"50%",transform:"translate(-50%)",color:t.palette.action.disabled},"end"===n.loadingPosition&&("outlined"===n.variant||"contained"===n.variant)&&{right:14},"end"===n.loadingPosition&&"text"===n.variant&&{right:6},"start"===n.loadingPosition&&n.fullWidth&&{position:"relative",left:-10},"end"===n.loadingPosition&&n.fullWidth&&{position:"relative",right:-10})})),S=i.forwardRef((function(e,t){var n=Object(d.a)({props:e,name:"MuiLoadingButton"}),a=n.children,l=n.disabled,b=void 0!==l&&l,p=n.id,v=n.loading,j=void 0!==v&&v,S=n.loadingIndicator,w=n.loadingPosition,y=void 0===w?"center":w,P=n.variant,_=void 0===P?"text":P,C=Object(o.a)(n,g),I=Object(s.a)(p),k=null!=S?S:Object(h.jsx)(f.a,{"aria-labelledby":I,color:"inherit",size:16}),B=Object(r.a)({},n,{disabled:b,loading:j,loadingIndicator:k,loadingPosition:y,variant:_}),L=function(e){var t=e.loading,n=e.loadingPosition,a=e.classes,o={root:["root",t&&"loading"],startIcon:[t&&"startIconLoading".concat(Object(c.a)(n))],endIcon:[t&&"endIconLoading".concat(Object(c.a)(n))],loadingIndicator:["loadingIndicator",t&&"loadingIndicator".concat(Object(c.a)(n))]},i=Object(u.a)(o,m,a);return Object(r.a)({},a,i)}(B);return Object(h.jsx)(O,Object(r.a)({disabled:b||j,id:I,ref:t},C,{variant:_,classes:L,ownerState:B,children:"end"===B.loadingPosition?Object(h.jsxs)(i.Fragment,{children:[a,j&&Object(h.jsx)(x,{className:L.loadingIndicator,ownerState:B,children:k})]}):Object(h.jsxs)(i.Fragment,{children:[j&&Object(h.jsx)(x,{className:L.loadingIndicator,ownerState:B,children:k}),a]})}))}));t.a=S},570:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(571),o=n.n(a),r=n(572),i=n.n(r),c=n(488),s=n(380),u=n(34),l=(n(0),n(22)),d=n(116),b=n(1);function f(e){var t=e.onBack,n=e.loading,a=Object(u.a)(),r=Object(l.f)();return Object(b.jsxs)(d.a,{boxShadow:!0,shadow:"0px 4px 4px rgba(0, 0, 0, 0.05)",sx:{boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.05)",border:"1px solid #E5E5E5 !important",mb:3},contentSX:{padding:"8px !important"},children:[Object(b.jsx)(s.a,{disableElevation:!0,type:"button",variant:"contained",startIcon:Object(b.jsx)(o.a,{}),onClick:function(){t?null===t||void 0===t||t():r(-1)},sx:{mr:2,bgcolor:a.palette.grey.A200,color:"#000"},children:"Back"}),Object(b.jsx)(c.a,{disableElevation:!0,disabled:n,type:"submit",variant:"contained",color:"primary",startIcon:Object(b.jsx)(i.a,{}),loading:n,loadingPosition:"start",children:"Save"})]})}},571:function(e,t,n){"use strict";var a=n(75);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(88)),r=n(1),i=(0,o.default)((0,r.jsx)("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace");t.default=i},572:function(e,t,n){"use strict";var a=n(75);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(88)),r=n(1),i=(0,o.default)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.default=i},574:function(e,t,n){"use strict";var a=n(25),o=n(26),r=n(410),i=n(414),c=n(416),s=n(12),u=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.call(this,"/v1/users")}return Object(o.a)(n,[{key:"getGroups",value:function(e){return s.a.get("".concat(this.apiName,"/group?parent_id=").concat(e))}},{key:"getRoles",value:function(){return s.a.get("".concat(this.apiName,"/role"))}}]),n}(c.a);t.a=new u},577:function(e,t,n){"use strict";var a=n(6),o=n(801),r=n(814),i=n(800),c=n(812),s=n(815),u=n(34),l=n(0),d=n(3);function b(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var a=Object(l.useRef)(0),o=function(){var e=Object(l.useRef)(!1),t=Object(l.useCallback)((function(){return e.current}),[]);return Object(l.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t}(),r=Object(l.useState)(n),i=r[0],c=r[1],s=Object(l.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=++a.current;return i.loading||c((function(e){return Object(d.a)(Object(d.a)({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return o()&&r===a.current&&c({value:e,loading:!1}),e}),(function(e){return o()&&r===a.current&&c({error:e,loading:!1}),e}))}),t);return[i,s]}var f=n(12),p=n(1);t.a=function(e){var t=e.formik,n=t.errors,d=(t.handleBlur,t.handleChange),v=t.touched,m=(t.values,t.setValues,e.label),j=e.name,h=e.required,g=e.selectProps,O=e.dataSource,x=e.api,S=e.transformFn,w=e.renderItem,y=e.handleSelect,P=Object(u.a)(),C=function(e,t){void 0===t&&(t=[]);var n=b(e,t,{loading:!0}),a=n[0],o=n[1];return Object(l.useEffect)((function(){o()}),[o]),a}((function(){return x&&!_.some(O)?f.a.get(x).then((function(e){return _.isFunction(S)?_.map(e.data,S):e.data})):Promise.resolve(O)}),[x,O]),I=C.value;C.loading;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(o.a,{sx:{color:null!==g&&void 0!==g&&g.disabled?"#CCCCCC":"#4C4C4C",fontWeight:"700"},required:h,htmlFor:j,children:m}),Object(p.jsxs)(r.a,{fullWidth:!0,error:Boolean(v["".concat(j)]&&n["".concat(j)]),sx:Object(a.a)({},P.typography.customInput),children:[Object(p.jsxs)(i.a,Object(a.a)(Object(a.a)({},Object(a.a)(Object(a.a)({},g),{},{onSelectValue:{}})),{},{value:null===g||void 0===g?void 0:g.value,name:j,onChange:function(e){return y?null===y||void 0===y?void 0:y(_.find(I,["id",e.target.value])):d(e)},onBlur:function(e){return y?null===y||void 0===y?void 0:y(_.find(I,["id",e.target.value])):d(e)},defaultValue:"",children:[!(null!==g&&void 0!==g&&g.notAllowSelectNull)&&Object(p.jsx)(c.a,{value:null,children:Object(p.jsx)("em",{children:"None"})}),_.isFunction(w)?_.map(I,w):_.map(I,(function(e,t){return Object(p.jsx)(c.a,{value:e.id,children:e.name},t)}))]})),v["".concat(j)]&&n["".concat(j)]&&Object(p.jsx)(s.a,{error:!0,id:"".concat(j,"--error"),children:n["".concat(j)]})]})]})}},809:function(e,t,n){"use strict";n.r(t);var a=n(11),o=n(13),r=n(4),i=n.n(r),c=n(173),s=n(77),u=n(0),l=n.n(u),d=n(149),b=n(22),f=n(574),p=n(420),v=n(6),m=n(377),j=n(115),h=n(34),g=n(577),O=n(468),x=n(570),S=n(439),w=n(116),y=n(440),P=n(1),C={fullname:"",email:"",phone:"",position:"Staff",group_id:"",sub_group_id:"0",role:"",password:""},I=function(e){var t=e.onSubmit,n=e.dataInitial,a=e.isLoading,o=e.isEdit,r=e.groups,i=e.roles,c=e.subGroups,s=e.onChangeGroup,l=e.isPartner,d=(e.onChangePosition,Object(h.a)()),b=Object(S.b)({initialValues:C,validationSchema:y.d({fullname:y.f().required("Partner is required"),email:y.f().email("Must be a valid email").max(255).required("Email is required"),phone:y.f().min(10,"Phone must be 10 characters").max(10,"Phone must be 10 characters").trim().required("Phone is required").matches(/^\d+$/,"Phone is not in correct format"),position:y.f().required("Position is required"),group_id:y.f().required("Group is required"),sub_group_id:y.f().required("Sub-Group is required"),role:y.f().required("Role is required")}),onSubmit:t,onReset:function(e){}});return Object(u.useEffect)((function(){n&&b.setValues(Object(v.a)(Object(v.a)({},b.values),n))}),[n]),Object(P.jsx)(P.Fragment,{children:Boolean(a)?Object(P.jsx)("div",{children:"Loading"}):Object(P.jsxs)("form",{onSubmit:function(e){b.handleSubmit(e),console.log(b.errors)},children:[Object(P.jsx)(x.a,{loading:b.isSubmitting}),Object(P.jsx)(w.a,{boxShadow:!0,shadow:"0px 4px 4px rgba(0, 0, 0, 0.05)",sx:{boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.05)",border:"1px solid #E5E5E5 !important",mb:3},children:Object(P.jsxs)(m.a,{container:!0,spacing:2,children:[Object(P.jsx)(m.a,{item:!0,xs:12,children:Object(P.jsxs)(j.a,{variant:"h3",sx:{color:d.palette.primary.main},children:[Boolean(o)?"User Details - Edit":"Add New User"," ",Boolean(l)?" Of Partner":""]})}),Object(P.jsx)(m.a,{item:!0,xs:12,children:Object(P.jsxs)(m.a,{container:!0,spacing:2,children:[Object(P.jsx)(m.a,{item:!0,xs:12,md:4,children:Object(P.jsx)(O.a,{formik:b,title:"Full Name",name:"fullname"})}),Object(P.jsx)(m.a,{item:!0,xs:12,md:4,children:Object(P.jsx)(O.a,{formik:b,title:"Email",name:"email"})}),Object(P.jsx)(m.a,{item:!0,xs:12,md:4,children:Object(P.jsx)(O.a,{formik:b,title:"Phone",name:"phone"})}),!Boolean(l)&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(m.a,{item:!0,xs:12,md:!0,children:Object(P.jsx)(g.a,{formik:b,label:"Position",name:"position",dataSource:[{id:"Manager",name:"Manager"},{id:"Staff",name:"Staff"}],selectProps:{notAllowSelectNull:!0,value:b.values.position}})}),Object(P.jsx)(m.a,{item:!0,xs:12,md:!0,children:Object(P.jsx)(g.a,{formik:b,label:"Role",name:"role",dataSource:i,selectProps:{notAllowSelectNull:!0,value:b.values.role}})}),Object(P.jsx)(m.a,{item:!0,xs:12,md:!0,children:Object(P.jsx)(g.a,{formik:b,label:"Group",name:"group_id",dataSource:r,handleSelect:function(e){e&&(b.setFieldValue("group_id",e.id),b.setFieldValue("sub_group_id",0),s(e))},selectProps:{notAllowSelectNull:!0,value:b.values.group_id}})}),Boolean("Manager"!==b.values.position)&&Object(P.jsx)(m.a,{item:!0,xs:12,md:!0,children:Object(P.jsx)(g.a,{formik:b,label:"Sub-Group",name:"sub_group_id",dataSource:c,selectProps:{notAllowSelectNull:!0,value:b.values.sub_group_id}})})]})]})})]})})]})})},k=l.a.memo(I),B=function(e){Object.assign({},e),Object(b.f)();var t=Object(b.g)().id,n=Object(u.useState)(!1),r=Object(o.a)(n,2),l=r[0],v=r[1],m=Object(u.useState)(null),j=Object(o.a)(m,2),h=j[0],g=j[1],O=Object(s.a)().user,x=(null===O||void 0===O?void 0:O.role)===c.a.PARTNER,S=Object(d.useQuery)(["qGroupsQuery"],(function(){return f.a.getGroups(0)}),{keepPreviousData:!0,onError:function(e){p.a.toast("error",(null===e||void 0===e?void 0:e.message)||"Something went error !")},onSuccess:function(e){}}),w=Object(d.useQuery)(["qSubGroupsQuery",h],(function(){return h?f.a.getGroups(h):null}),{keepPreviousData:!0,onError:function(e){p.a.toast("error",(null===e||void 0===e?void 0:e.message)||"Something went error !")},onSuccess:function(e){}}),y=Object(d.useQuery)(["qRolesQuery"],(function(){return f.a.getRoles()}),{keepPreviousData:!0,onError:function(e){p.a.toast("error",(null===e||void 0===e?void 0:e.message)||"Something went error !")},onSuccess:function(e){}}),C=Object(d.useQuery)(["detail_data",t],(function(){return t?(v(!0),f.a.getById(t)):(v(!1),null)}),{keepPreviousData:!0,onError:function(e){p.a.toast("error",(null===e||void 0===e?void 0:e.message)||"Something went error !")},onSuccess:function(e){g(_.get(e,"data.data.group_id"))}}),I=function(){var e=Object(a.a)(i.a.mark((function e(t,n){var o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{l||((o=_.pick(t,["fullname","email","phone","position","group_id","sub_group_id","role","password"])).sub_group_id="Manager"===o.position?"0":o.sub_group_id,f.a.insert(o).then((function(e){p.a.toast("success","Created new User"),n.resetForm()})).catch((function(e){p.a.toast("error","".concat(null===e||void 0===e?void 0:e.message," ").concat(_.map(e.details,(function(e){return"\n<i> - ".concat(e,"</i>")})))||"Something went error !")}))),l&&(r=_.pick(t,["id","status","fullname","email","phone","position","group_id","sub_group_id","role","password"]),p.a.showConfirm({onConfirm:function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.updatePut(r).then((function(e){p.a.toast("success","Updated User"),C.refetch()})).catch((function(e){p.a.toast("error","".concat(null===e||void 0===e?void 0:e.message," ").concat(_.map(e.details,(function(e){return"\n<i> - ".concat(e,"</i>")})))||"Something went error !")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),n.setStatus({success:!0}),n.setSubmitting(!1)}catch(c){console.error(c),n.setStatus({success:!1}),n.setSubmitting(!1)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(P.jsx)(k,{onSubmit:I,dataInitial:_.get(C,"data.data.data",x?{status:0,created_by:null===O||void 0===O?void 0:O.id,partner_id:null===O||void 0===O?void 0:O.partner_id,user_type:2,role:c.a.PARTNER_STAFF}:{status:0,created_by:null===O||void 0===O?void 0:O.id,partner_id:null===O||void 0===O?void 0:O.partner_id,user_type:1}),onChangeGroup:function(e){g(e.id)},groups:_.get(S,"data.data.data",[]),subGroups:_.get(w,"data.data.data",[]),roles:_.map(_.get(y,"data.data.data",[]),(function(e){return{id:e.code,name:e.name}})),isLoading:C.isLoading,isEdit:l,isPartner:x})};t.default=l.a.memo(B)}}]);
//# sourceMappingURL=20.676e9413.chunk.js.map