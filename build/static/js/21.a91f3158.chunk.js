(this["webpackJsonpfe-react-ts"]=this["webpackJsonpfe-react-ts"]||[]).push([[21],{414:function(e,t,n){"use strict";var a=n(449),c=n.n(a);t.a=new c.a},423:function(e,t,n){"use strict";var a=n(174);t.a={showToast:function(e,t){Object(a.b)(t,{type:e})}}},440:function(e,t,n){"use strict";n.d(t,"b",(function(){return P}));var a=n(66),c=n(6),o=n(28),i=n(13),r=n(474),s=n.n(r),l=n(519),d=n(520),u=n(521),j=n(522),b=n(523),f=n(580),O=n(357),p=n(118),h=n(524),g=n(581),v=n(518),x=n(567),m=n(171),w=n(0),C=n.n(w),S=n(473),E=n(414),y=n(1),k=["indeterminate"],P=Object(w.createRef)();t.a=function(e){var t=e.data,n=e.columns,a=e.onClickRowItem,r=e.showCustomFilter,v=void 0!==r&&r,k=e.rowId,T=void 0===k?"":k,A=e.disableCheckbox,D=e.manualSortBy,F=void 0===D||D,I=e.manualPagination,L=void 0===I||I,H=e.hiddenColumns,z=void 0===H?[]:H,B=C.a.useMemo((function(){return{text:function(e,t,n){return e.filter((function(e){var a=null===e||void 0===e?void 0:e.values[t];return void 0===a||String(a).toLowerCase().startsWith(String(n).toLowerCase())}))}}}),[]),G=Object(w.useContext)(m.b),N=Object(i.a)(G,2),W=N[0],M=W.queryPageIndex,Y=W.queryPageSize,U=W.totalCount,q=N[1],J=Object(S.useTable)({columns:n,data:t,initialState:{pageIndex:M,pageSize:Y,hiddenColumns:z},manualSortBy:F,disableSortRemove:!0,manualPagination:L,manualFilters:!0,pageCount:U,filterTypes:B,autoResetSelectedRows:!1,getRowId:function(e){return _.get(e,T)}},S.useFilters,S.useSortBy,S.usePagination,S.useRowSelect,(function(e){A||e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return Object(y.jsx)("div",{children:Object(y.jsx)(R,Object(c.a)({},t()))})},Cell:function(e){var t=e.row;return Object(y.jsx)("div",{children:Object(y.jsx)(R,Object(c.a)({},t.getToggleRowSelectedProps()))})}}].concat(Object(o.a)(e))}))})),K=J.getTableProps,Q=J.getTableBodyProps,V=J.headerGroups,X=J.prepareRow,Z=J.page,$=(J.canPreviousPage,J.canNextPage,J.pageOptions),ee=(J.pageCount,J.gotoPage),te=(J.nextPage,J.previousPage,J.setPageSize),ne=(J.selectedFlatRows,J.toggleAllPageRowsSelected),ae=J.setAllFilters,ce=J.setFilter,oe=J.state,ie=oe.pageIndex,re=oe.pageSize,se=oe.sortBy,le=oe.filters,de=oe.selectedRowIds,ue=function(){return ae([])},je=function(e){e&&ne(!1)};Object(w.useImperativeHandle)(P,(function(){return{setFilter:ce}})),C.a.useEffect((function(){E.a.addListener("DESELECT_ALL_ROWS",je)}),[]),C.a.useEffect((function(){q({type:"PAGE_SIZE_CHANGED",payload:re}),ee(0)}),[re,ee]),C.a.useEffect((function(){de&&q({type:"SELECTED_CHANGE",payload:de})}),[de]),C.a.useEffect((function(){se&&q({type:"SORT_BY_OBJECT_CHANGED",payload:se})}),[se]),C.a.useEffect((function(){le&&q({type:"FILTERS_CHANGED",payload:le})}),[le]);var be=ie>0?Math.max(0,(1+ie)*re-$.length):0,fe=C.a.useState(!1),Oe=Object(i.a)(fe,1)[0];return Object(y.jsxs)("div",{children:[Object(y.jsx)(u.a,Object(c.a)(Object(c.a)({},K()),{},{children:Object(y.jsxs)(j.a,{"aria-labelledby":"tableTitle",size:Oe?"small":"medium",children:[Object(y.jsx)(b.a,{children:V.map((function(e){return Object(y.jsx)(l.a,Object(c.a)(Object(c.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({},"selection"===e.id?e.getHeaderProps():e.getHeaderProps(e.getSortByToggleProps())),{},{sx:{padding:.5,minWidth:e.minWidth,textAlign:"left"},children:Object(y.jsxs)(f.a,{active:e.isSorted,direction:e.isSortedDesc?"desc":"asc",IconComponent:s.a,children:[e.render("Header"),"selection"!==e.id?Object(y.jsx)(O.a,{component:"span",sx:x.a,children:e.isSortedDesc?"sorted descending":"sorted ascending"}):null]})}))}))}))}))}),v&&Object(y.jsx)(b.a,{children:V.map((function(e){return Object(y.jsx)(l.a,Object(c.a)(Object(c.a)({},e.getHeaderGroupProps()),{},{sx:{textAlign:"center"},children:e.headers.map((function(e){return"selection"===e.id?Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getHeaderProps()),{},{onClick:ue,children:Object(y.jsx)(p.a,{sx:{cursor:"pointer"},children:"Clear"})})):Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getHeaderProps()),{},{sx:{px:1},children:e.canFilter?e.render("Filter"):null}))}))}))}))}),Object(y.jsxs)(h.a,Object(c.a)(Object(c.a)({},Q()),{},{children:[!Boolean(t.length)&&Object(y.jsx)(l.a,{children:Object(y.jsx)(d.a,{sx:{textAlign:"left"},colSpan:n.length+1,children:"Empty Data"})}),Z.map((function(e){return X(e),Object(y.jsx)(l.a,Object(c.a)(Object(c.a)({hover:!0},e.getRowProps()),{},{onClick:function(){return null===a||void 0===a?void 0:a(e)},sx:{textDecoration:"none",cursor:"pointer"},children:e.cells.map((function(e){return Object(y.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getCellProps()),{},{sx:{padding:.5,wordBreak:"break-all"},children:e.render("Cell")}))}))}))})),be>0&&Object(y.jsx)(l.a,{style:{height:(Oe?33:53)*be},children:Object(y.jsx)(d.a,{colSpan:n.length+1})})]}))]})})),Object(y.jsx)(g.a,{component:"div",rowsPerPageOptions:[10,20,50],count:$.length,rowsPerPage:Y,page:M,onPageChange:function(e,t){ee(t),q({type:"PAGE_CHANGED",payload:t})},onRowsPerPageChange:function(e){te(Number(e.target.value))}})]})};var R=C.a.forwardRef((function(e,t){var n=e.indeterminate,o=Object(a.a)(e,k),i=C.a.useRef(),r=t||i;return C.a.useEffect((function(){r.current.indeterminate=n}),[r,n]),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(v.a,Object(c.a)(Object(c.a)({ref:r},o),{},{onClick:function(e){e.stopPropagation()}}))})}))},481:function(e,t,n){"use strict";var a=n(6),c=n(13),o=n(5),i=n(390),r=n(118),s=n(366),l=n(612),d=n(385),u=n(357),j=n(391),b=n(8),f=n(34),O=n(168),p=n(21),h=n(171),g=n(78),v=n(0),x=n(38),m=n(414),w=n(1),C=Object(b.a)(i.a,{shouldForwardProp:O.b})((function(e){var t,n=e.theme;return t={width:434,height:36,marginLeft:16,marginRight:16,paddingLeft:16,paddingRight:16,"& input":{background:"transparent !important",paddingLeft:"4px !important"}},Object(o.a)(t,n.breakpoints.down("lg"),{width:250}),Object(o.a)(t,n.breakpoints.down("md"),{width:100,background:"dark"===n.palette.mode?n.palette.dark[800]:"#fff"}),t})),S=Object(b.a)("input")({display:"none"});t.a=function(e){var t=e.onClickUser,n=e.urlAddTicket,o=e.onClickDownload,i=e.onUploadFile,b=e.onClickTrash,O=e.title,y=void 0===O?"Partner List":O,k=Object(f.a)(),P=(Object(g.a)().user,Object(v.useContext)(h.b)),R=Object(c.a)(P,1)[0].selectedIds,T=Object(v.useState)(""),A=Object(c.a)(T,2),D=A[0],F=A[1];Object(v.useEffect)((function(){m.a.emit("SEARCH_TICKET_LIST",{value:D})}),[D]);var I=function(e){null===i||void 0===i||i(e.target.files[0])};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(r.a,{sx:{mb:1},children:"".concat(y," - ").concat(_.keys(R).length," Selected")}),Object(w.jsxs)(s.a,{direction:"row",spacing:1.5,sx:{marginBottom:1},children:[Object(w.jsx)(l.a,{title:"Download",children:Object(w.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},E.btn),{},{minWidth:36,padding:0}),variant:"outlined",onClick:o,children:Object(w.jsx)(p.j,{size:18})})}),Object(w.jsx)(l.a,{title:"Upload",children:Object(w.jsxs)("label",{style:{display:"flex"},htmlFor:"contained-button-file",children:[Object(w.jsx)(S,{accept:".xlsx, .xls, .csv",type:"file",id:"contained-button-file",onChange:I,onClick:function(e){e.target.value=null}}),Object(w.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},E.btn),{},{minWidth:36,padding:0}),component:"span",variant:"outlined",children:Object(w.jsx)(p.w,{size:18})})]})}),Object(w.jsx)(l.a,{title:"Delete",children:Object(w.jsx)(d.a,{onClick:b,sx:Object(a.a)(Object(a.a)({},E.btn),{},{minWidth:36,padding:0}),variant:"outlined",children:Object(w.jsx)(p.v,{size:18})})}),Object(w.jsx)(l.a,{title:"Toggle Mode",children:Object(w.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},E.btn),{},{minWidth:36,padding:0}),variant:"outlined",onClick:t,children:Object(w.jsx)(p.x,{size:18})})}),Object(w.jsx)(u.a,{sx:{flexGrow:1}}),Object(w.jsx)(u.a,{children:Object(w.jsx)(C,{id:"input-search-header",value:D,onChange:function(e){return F(e.target.value)},placeholder:"Search",startAdornment:Object(w.jsx)(j.a,{position:"start",children:Object(w.jsx)(p.q,{stroke:1.5,size:"1rem",color:k.palette.grey[500]})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"},sx:{height:36}})}),Object(w.jsx)(d.a,{variant:"outlined",sx:{borderColor:"#E5E5E5",color:"#008345",borderRadius:2,height:36,fontSize:12,fontWeight:"bold"},startIcon:Object(w.jsx)(p.p,{color:"#008345",size:18}),component:x.b,to:n,children:"Add New"})]})]})};var E={btn:{borderColor:"#E5E5E5",height:36}}},542:function(e,t,n){"use strict";var a=n(0);function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var i="undefined"!==typeof window,r=function(e,t){return new URLSearchParams(e).get(t)};t.a=i?function(e){var t=window.location,n=Object(a.useState)((function(){return r(t.search,e)})),i=n[0],s=n[1];return Object(a.useEffect)((function(){var n=function(){s(r(t.search,e))};return c(window,"popstate",n),c(window,"pushstate",n),c(window,"replacestate",n),function(){o(window,"popstate",n),o(window,"pushstate",n),o(window,"replacestate",n)}}),[]),i}:function(){return null}},575:function(e,t,n){"use strict";var a=n(23),c=n(24),o=n(169),i=n(170),r=n(172),s=n(11),l=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.call(this,"/v1/users")}return Object(c.a)(n,[{key:"getGroups",value:function(e){return s.a.get("".concat(this.apiName,"/group?parent_id=").concat(e))}},{key:"getRoles",value:function(){return s.a.get("".concat(this.apiName,"/role"))}}]),n}(r.a);t.a=new l},804:function(e,t,n){"use strict";n.r(t);var a=n(13),c=n(357),o=n(382),i=n(481),r=n(171),s=n(0),l=n.n(s),d=n(105),u=n(22),j=n(542),b=n(575),f=n(119),O=n(414),p=n(423),h=n(28),g=n(393),v=n(766),x=n(815),m=n(21),w=n(440),C=function(e){var t="",n="";switch(e){case 0:t="#FF0015",n="Deactive";break;case 1:t="#27AE60",n="Active";break;default:t="#FF0015",n="N/A"}return{color:t,name:n}},S=n(121),E=n(1),y=function(e){var t=e.data,n=void 0===t?[]:t,c=e.loading,o=e.cols,i=void 0===o?[]:o,r=e.onClickRowItem,d=e.onEdit,u=(e.onDelete,Object(s.useState)(null)),j=Object(a.a)(u,2),b=j[0],O=j[1],p=Object(s.useState)(null),y=Object(a.a)(p,2),k=y[0],P=y[1],_=function(){O(null)},R=l.a.useMemo((function(){return i[0]?i.map((function(e){if("action"===e)return{Header:Object(S.startCase)(Object(S.camelCase)(e)),accessor:e,Cell:function(e){var t=e.row;return Object(E.jsx)(g.a,{onClick:function(e){return function(e,t){P(t),e.stopPropagation(),O(null===e||void 0===e?void 0:e.currentTarget)}(e,t)},children:Object(E.jsx)(m.i,{})})},Filter:""};var t=["created_date"].includes(e),n=["status"].includes(e);return{Header:Object(S.startCase)(Object(S.camelCase)(e)),accessor:e,Cell:function(e){var a=e.value;return Object(E.jsx)("div",{style:{maxHeight:65,overflow:"hidden",color:n?C(a).color:"black"},children:t?moment(a).format("DD/MM/YYYY hh:mm A"):n?C(a).name:a})},Filter:""}})):[]}),[i]),T=l.a.useMemo((function(){return Object(h.a)(n)}),[n]);return Object(E.jsxs)(f.a,{content:!1,border:!1,children:[Object(E.jsxs)(v.a,{id:"menu-followers-card",anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:_,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(E.jsx)(x.a,{onClick:function(){d(k),_()},sx:{color:"#27AE60",fontSize:12,fontWeight:500},children:"Edit"}),Object(E.jsx)(x.a,{onClick:_,sx:{color:"#808080",fontSize:12,fontWeight:500},children:"View"}),Object(E.jsx)(x.a,{onClick:_,sx:{color:"#FF0015",fontSize:12,fontWeight:500},children:"Delete"})]}),c?Object(E.jsx)("div",{children:"loading..."}):Object(E.jsx)(w.a,{rowId:"ID",onClickRowItem:r,data:T,columns:R})]})};t.default=function(){var e,t,n=Object(s.useContext)(r.b),l=Object(a.a)(n,2),h=l[0],g=h.queryPageIndex,v=h.queryPageSize,x=h.sortByObject,m=h.filters,w=(h.selectedIds,h.resetState,l[1]),C=Object(s.useState)(""),S=Object(a.a)(C,2),k=S[0],P=S[1],R=Object(u.f)(),T=Object(j.a)("user_id"),A=Object(d.useQuery)(["user_table",g,v,k,x,m],(function(){var e,t,n,a="per_page=".concat(v,"&page=").concat(g+1),c=0===(null===k||void 0===k?void 0:k.length)?"":"&keyword=".concat(k),o="view_type=".concat(2),i=Boolean(x.length)?"&order_by=".concat(null!==(e=null===(t=x[0])||void 0===t?void 0:t.id)&&void 0!==e?e:"ticket_id","&sorted_by=").concat(null!==(n=x[0])&&void 0!==n&&n.desc?"desc":"asc"):"",r=Boolean(m)?_.map(m,(function(e){var t=["created_date","last_status_date"].includes(e.id);return"&".concat(e.id,"=").concat(t?moment(e.value).format("DD/MM/YYYY"):e.value)})).join(""):"";return b.a.getAll("".concat(a).concat(c,"&").concat(o).concat(i).concat(r))}),{keepPreviousData:!0,onError:function(e){p.a.showToast("error",e.message)},onSuccess:function(e){var t,n,a;w({type:"TOTAL_COUNT_CHANGED",payload:null===(t=e.data)||void 0===t||null===(n=t.meta)||void 0===n||null===(a=n.pagination)||void 0===a?void 0:a.total})}}),D=A.isLoading,F=A.data,I=(A.refetch,_.debounce((function(e){var t=e.value;P(t)}),1500,{maxWait:1500}));Object(s.useEffect)((function(){return O.a.addListener("SEARCH_TICKET_LIST",I),function(){O.a.removeAllListeners()}}),[]),Object(s.useEffect)((function(){T&&w({type:"FILTERS_CHANGED",payload:[{id:"user_id",value:T}]})}),[T]);return Object(E.jsx)(c.a,{sx:{display:"flex"},children:Object(E.jsx)(o.a,{container:!0,children:Object(E.jsx)(o.a,{item:!0,xs:12,children:Object(E.jsxs)(f.a,{contentSX:{p:2},children:[Object(E.jsx)(i.a,{onClickDownload:function(){},onClickUser:function(){},urlAddTicket:"create",onUploadFile:function(){},onClickTrash:function(){},title:"User List"}),Object(E.jsx)(y,{onClickRowItem:function(e){var t;R(null===(t=e.id)||void 0===t?void 0:t.toString())},loading:D,data:null===F||void 0===F||null===(e=F.data)||void 0===e?void 0:e.data,cols:null===F||void 0===F||null===(t=F.data)||void 0===t?void 0:t.cols,onEdit:function(e){var t;R(null===(t=e.id)||void 0===t?void 0:t.toString())},onDelete:function(){}})]})})})})}}}]);
//# sourceMappingURL=21.a91f3158.chunk.js.map