(this["webpackJsonpfe-react-ts"]=this["webpackJsonpfe-react-ts"]||[]).push([[25],{409:function(e,t,n){"use strict";var a=n(447),c=n.n(a);t.a=new c.a},416:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(25),c=n(26),i=n(164),o=n.n(i),r=n(12),s=function(){function e(t){Object(a.a)(this,e),this.apiName=t}return Object(c.a)(e,[{key:"getAll",value:function(e){var t=e?"?".concat(e):"";return r.a.get("".concat(this.apiName).concat(t))}},{key:"getById",value:function(e,t){return r.a.get("".concat(this.apiName,"/").concat(e),{params:{filter:JSON.stringify(t)}})}},{key:"delete",value:function(e){return r.a.delete("".concat(this.apiName,"/").concat(e))}},{key:"updatePatch",value:function(e){return r.a.patch("".concat(this.apiName,"/").concat(e.id),e)}},{key:"updatePut",value:function(e){return e=this.convertDateStringsToDates(e),r.a.put("".concat(this.apiName,"/").concat(e.id),e)}},{key:"insert",value:function(e){return e=o.a.omit(e,["id"]),e=this.convertDateStringsToDates(e),r.a.post("".concat(this.apiName),e)}},{key:"convertDateStringsToDates",value:function(e){if("object"!==typeof e)return e;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];moment(n,moment.ISO_8601).isValid()?e[t]=moment(n).format("yyyy-MM-DD hh:mm:ss").toString():"object"===typeof n&&this.convertDateStringsToDates(n)}return e}}]),e}()},421:function(e,t,n){"use strict";var a=n(167);t.a={showToast:function(e,t){Object(a.b)(t,{type:e})}}},438:function(e,t,n){"use strict";n.d(t,"b",(function(){return E}));var a=n(64),c=n(6),i=n(28),o=n(13),r=n(474),s=n.n(r),l=n(519),d=n(520),u=n(521),j=n(522),b=n(523),O=n(580),f=n(352),h=n(115),p=n(524),g=n(581),x=n(518),v=n(567),m=n(165),C=n(0),y=n.n(C),S=n(473),w=n(409),k=n(1),P=["indeterminate"],E=Object(C.createRef)();t.a=function(e){var t=e.data,n=e.columns,a=e.onClickRowItem,r=e.showCustomFilter,x=void 0!==r&&r,P=e.rowId,D=void 0===P?"":P,R=e.disableCheckbox,A=e.manualSortBy,I=void 0===A||A,F=e.manualPagination,H=void 0===F||F,L=e.hiddenColumns,z=void 0===L?[]:L,N=y.a.useMemo((function(){return{text:function(e,t,n){return e.filter((function(e){var a=null===e||void 0===e?void 0:e.values[t];return void 0===a||String(a).toLowerCase().startsWith(String(n).toLowerCase())}))}}}),[]),B=Object(C.useContext)(m.b),W=Object(o.a)(B,2),G=W[0],M=G.queryPageIndex,U=G.queryPageSize,q=G.totalCount,Y=W[1],J=Object(S.useTable)({columns:n,data:t,initialState:{pageIndex:M,pageSize:U,hiddenColumns:z},manualSortBy:I,disableSortRemove:!0,manualPagination:H,manualFilters:!0,pageCount:q,filterTypes:N,autoResetSelectedRows:!1,getRowId:function(e){return _.get(e,D)}},S.useFilters,S.useSortBy,S.usePagination,S.useRowSelect,(function(e){R||e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return Object(k.jsx)("div",{children:Object(k.jsx)(T,Object(c.a)({},t()))})},Cell:function(e){var t=e.row;return Object(k.jsx)("div",{children:Object(k.jsx)(T,Object(c.a)({},t.getToggleRowSelectedProps()))})}}].concat(Object(i.a)(e))}))})),K=J.getTableProps,V=J.getTableBodyProps,Q=J.headerGroups,X=J.prepareRow,Z=J.page,$=(J.canPreviousPage,J.canNextPage,J.pageOptions),ee=(J.pageCount,J.gotoPage),te=(J.nextPage,J.previousPage,J.setPageSize),ne=(J.selectedFlatRows,J.toggleAllPageRowsSelected),ae=J.setAllFilters,ce=J.setFilter,ie=J.state,oe=ie.pageIndex,re=ie.pageSize,se=ie.sortBy,le=ie.filters,de=ie.selectedRowIds,ue=function(){return ae([])},je=function(e){e&&ne(!1)};Object(C.useImperativeHandle)(E,(function(){return{setFilter:ce}})),y.a.useEffect((function(){w.a.addListener("DESELECT_ALL_ROWS",je)}),[]),y.a.useEffect((function(){Y({type:"PAGE_SIZE_CHANGED",payload:re}),ee(0)}),[re,ee]),y.a.useEffect((function(){de&&Y({type:"SELECTED_CHANGE",payload:de})}),[de]),y.a.useEffect((function(){se&&Y({type:"SORT_BY_OBJECT_CHANGED",payload:se})}),[se]),y.a.useEffect((function(){le&&Y({type:"FILTERS_CHANGED",payload:le})}),[le]);var be=oe>0?Math.max(0,(1+oe)*re-$.length):0,Oe=y.a.useState(!1),fe=Object(o.a)(Oe,1)[0];return Object(k.jsxs)("div",{children:[Object(k.jsx)(u.a,Object(c.a)(Object(c.a)({},K()),{},{children:Object(k.jsxs)(j.a,{"aria-labelledby":"tableTitle",size:fe?"small":"medium",children:[Object(k.jsx)(b.a,{children:Q.map((function(e){return Object(k.jsx)(l.a,Object(c.a)(Object(c.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(k.jsx)(d.a,Object(c.a)(Object(c.a)({},"selection"===e.id?e.getHeaderProps():e.getHeaderProps(e.getSortByToggleProps())),{},{sx:{padding:.5,minWidth:e.minWidth,textAlign:"left"},children:Object(k.jsxs)(O.a,{active:e.isSorted,direction:e.isSortedDesc?"desc":"asc",IconComponent:s.a,children:[e.render("Header"),"selection"!==e.id?Object(k.jsx)(f.a,{component:"span",sx:v.a,children:e.isSortedDesc?"sorted descending":"sorted ascending"}):null]})}))}))}))}))}),x&&Object(k.jsx)(b.a,{children:Q.map((function(e){return Object(k.jsx)(l.a,Object(c.a)(Object(c.a)({},e.getHeaderGroupProps()),{},{sx:{textAlign:"center"},children:e.headers.map((function(e){return"selection"===e.id?Object(k.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getHeaderProps()),{},{onClick:ue,children:Object(k.jsx)(h.a,{sx:{cursor:"pointer"},children:"Clear"})})):Object(k.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getHeaderProps()),{},{sx:{px:1},children:e.canFilter?e.render("Filter"):null}))}))}))}))}),Object(k.jsxs)(p.a,Object(c.a)(Object(c.a)({},V()),{},{children:[!Boolean(t.length)&&Object(k.jsx)(l.a,{children:Object(k.jsx)(d.a,{sx:{textAlign:"left"},colSpan:n.length+1,children:"Empty Data"})}),Z.map((function(e){return X(e),Object(k.jsx)(l.a,Object(c.a)(Object(c.a)({hover:!0},e.getRowProps()),{},{onClick:function(){return null===a||void 0===a?void 0:a(e)},sx:{textDecoration:"none",cursor:"pointer"},children:e.cells.map((function(e){return Object(k.jsx)(d.a,Object(c.a)(Object(c.a)({},e.getCellProps()),{},{sx:{padding:.5,wordBreak:"break-all"},children:e.render("Cell")}))}))}))})),be>0&&Object(k.jsx)(l.a,{style:{height:(fe?33:53)*be},children:Object(k.jsx)(d.a,{colSpan:n.length+1})})]}))]})})),Object(k.jsx)(g.a,{component:"div",rowsPerPageOptions:[10,20,50],count:$.length,rowsPerPage:U,page:M,onPageChange:function(e,t){ee(t),Y({type:"PAGE_CHANGED",payload:t})},onRowsPerPageChange:function(e){te(Number(e.target.value))}})]})};var T=y.a.forwardRef((function(e,t){var n=e.indeterminate,i=Object(a.a)(e,P),o=y.a.useRef(),r=t||o;return y.a.useEffect((function(){r.current.indeterminate=n}),[r,n]),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(x.a,Object(c.a)(Object(c.a)({ref:r},i),{},{onClick:function(e){e.stopPropagation()}}))})}))},480:function(e,t,n){"use strict";var a=n(26),c=n(25),i=n(410),o=n(414),r=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"/v1/partners")}return Object(a.a)(n)}(n(416).a);t.a=new r},481:function(e,t,n){"use strict";var a=n(6),c=n(13),i=n(5),o=n(385),r=n(115),s=n(361),l=n(612),d=n(380),u=n(352),j=n(386),b=n(8),O=n(34),f=n(163),h=n(21),p=n(165),g=n(76),x=n(0),v=n(38),m=n(409),C=n(1),y=Object(b.a)(o.a,{shouldForwardProp:f.b})((function(e){var t,n=e.theme;return t={width:434,height:36,marginLeft:16,marginRight:16,paddingLeft:16,paddingRight:16,"& input":{background:"transparent !important",paddingLeft:"4px !important"}},Object(i.a)(t,n.breakpoints.down("lg"),{width:250}),Object(i.a)(t,n.breakpoints.down("md"),{width:100,background:"dark"===n.palette.mode?n.palette.dark[800]:"#fff"}),t})),S=Object(b.a)("input")({display:"none"});t.a=function(e){var t=e.onClickUser,n=e.urlAddTicket,i=e.onClickDownload,o=e.onUploadFile,b=e.onClickTrash,f=e.title,k=void 0===f?"Partner List":f,P=Object(O.a)(),E=(Object(g.a)().user,Object(x.useContext)(p.b)),T=Object(c.a)(E,1)[0].selectedIds,D=Object(x.useState)(""),R=Object(c.a)(D,2),A=R[0],I=R[1];Object(x.useEffect)((function(){m.a.emit("SEARCH_TICKET_LIST",{value:A})}),[A]);var F=function(e){null===o||void 0===o||o(e.target.files[0])};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(r.a,{sx:{mb:1},children:"".concat(k," - ").concat(_.keys(T).length," Selected")}),Object(C.jsxs)(s.a,{direction:"row",spacing:1.5,sx:{marginBottom:1},children:[Object(C.jsx)(l.a,{title:"Download",children:Object(C.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},w.btn),{},{minWidth:36,padding:0}),variant:"outlined",onClick:i,children:Object(C.jsx)(h.j,{size:18})})}),Object(C.jsx)(l.a,{title:"Upload",children:Object(C.jsxs)("label",{style:{display:"flex"},htmlFor:"contained-button-file",children:[Object(C.jsx)(S,{accept:".xlsx, .xls, .csv",type:"file",id:"contained-button-file",onChange:F,onClick:function(e){e.target.value=null}}),Object(C.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},w.btn),{},{minWidth:36,padding:0}),component:"span",variant:"outlined",children:Object(C.jsx)(h.w,{size:18})})]})}),Object(C.jsx)(l.a,{title:"Delete",children:Object(C.jsx)(d.a,{onClick:b,sx:Object(a.a)(Object(a.a)({},w.btn),{},{minWidth:36,padding:0}),variant:"outlined",children:Object(C.jsx)(h.v,{size:18})})}),Object(C.jsx)(l.a,{title:"Toggle Mode",children:Object(C.jsx)(d.a,{sx:Object(a.a)(Object(a.a)({},w.btn),{},{minWidth:36,padding:0}),variant:"outlined",onClick:t,children:Object(C.jsx)(h.x,{size:18})})}),Object(C.jsx)(u.a,{sx:{flexGrow:1}}),Object(C.jsx)(u.a,{children:Object(C.jsx)(y,{id:"input-search-header",value:A,onChange:function(e){return I(e.target.value)},placeholder:"Search",startAdornment:Object(C.jsx)(j.a,{position:"start",children:Object(C.jsx)(h.q,{stroke:1.5,size:"1rem",color:P.palette.grey[500]})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"},sx:{height:36}})}),Object(C.jsx)(d.a,{variant:"outlined",sx:{borderColor:"#E5E5E5",color:"#008345",borderRadius:2,height:36,fontSize:12,fontWeight:"bold"},startIcon:Object(C.jsx)(h.p,{color:"#008345",size:18}),component:v.b,to:n,children:"Add New"})]})]})};var w={btn:{borderColor:"#E5E5E5",height:36}}},811:function(e,t,n){"use strict";n.r(t);var a=n(13),c=n(352),i=n(377),o=n(481),r=n(165),s=n(0),l=n.n(s),d=n(149),u=n(22),j=n(480),b=n(116),O=n(409),f=n(421),h=n(28),p=n(388),g=n(766),x=n(815),v=n(21),m=n(438),C=n(164),y=n(1),S=function(e){var t=e.data,n=void 0===t?[]:t,c=e.loading,i=e.cols,o=void 0===i?[]:i,r=e.onClickRowItem,d=Object(s.useState)(null),u=Object(a.a)(d,2),j=u[0],O=u[1],f=function(e){O(null===e||void 0===e?void 0:e.currentTarget)},S=function(){O(null)},w=l.a.useMemo((function(){return o[0]?o.map((function(e){return"action"===e?{Header:Object(C.startCase)(Object(C.camelCase)(e)),accessor:e,Cell:function(e){e.value;return Object(y.jsx)(p.a,{onClick:f,children:Object(y.jsx)(v.i,{})})},Filter:""}:{Header:Object(C.startCase)(Object(C.camelCase)(e)),accessor:e,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{style:{maxHeight:40,overflow:"hidden"},children:t})},Filter:""}})):[]}),[o]),k=l.a.useMemo((function(){return Object(h.a)(n)}),[n]);return Object(y.jsxs)(b.a,{content:!1,border:!1,children:[Object(y.jsxs)(g.a,{id:"menu-followers-card",anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:S,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(y.jsx)(x.a,{onClick:S,sx:{color:"#27AE60",fontSize:12,fontWeight:500},children:"Edit"}),Object(y.jsx)(x.a,{onClick:S,sx:{color:"#808080",fontSize:12,fontWeight:500},children:"View"}),Object(y.jsx)(x.a,{onClick:S,sx:{color:"#FF0015",fontSize:12,fontWeight:500},children:"Delete"})]}),c?Object(y.jsx)("div",{children:"loading..."}):Object(y.jsx)(m.a,{rowId:"ID",onClickRowItem:r,data:k,columns:w})]})};t.default=function(){var e,t,n=Object(s.useContext)(r.b),l=Object(a.a)(n,2),h=l[0],p=h.queryPageIndex,g=h.queryPageSize,x=h.sortByObject,v=h.filters,m=(h.selectedIds,h.resetState,l[1]),C=Object(s.useState)(""),w=Object(a.a)(C,2),k=w[0],P=w[1],E=Object(d.useQuery)(["pos_table",p,g,k,x,v],(function(){var e,t,n,a="per_page=".concat(g,"&page=").concat(p+1),c=0===(null===k||void 0===k?void 0:k.length)?"":"&keyword=".concat(k),i="view_type=".concat(3),o=Boolean(x.length)?"&order_by=".concat(null!==(e=null===(t=x[0])||void 0===t?void 0:t.id)&&void 0!==e?e:"ticket_id","&sorted_by=").concat(null!==(n=x[0])&&void 0!==n&&n.desc?"desc":"asc"):"",r=Boolean(v)?_.map(v,(function(e){var t=["created_date","last_status_date"].includes(e.id);return"&".concat(e.id,"=").concat(t?moment(e.value).format("DD/MM/YYYY"):e.value)})).join(""):"";return j.a.getAll("".concat(a).concat(c,"&").concat(i).concat(o).concat(r))}),{keepPreviousData:!0,onError:function(e){f.a.showToast("error",e.message)},onSuccess:function(e){var t,n,a;m({type:"TOTAL_COUNT_CHANGED",payload:null===(t=e.data)||void 0===t||null===(n=t.meta)||void 0===n||null===(a=n.pagination)||void 0===a?void 0:a.total})}}),T=E.isLoading,D=E.data,R=(E.refetch,Object(u.f)(),_.debounce((function(e){var t=e.value;P(t)}),1500,{maxWait:1500}));Object(s.useEffect)((function(){return O.a.addListener("SEARCH_TICKET_LIST",R),function(){O.a.removeAllListeners()}}),[]);return Object(y.jsx)(c.a,{sx:{display:"flex"},children:Object(y.jsx)(i.a,{container:!0,children:Object(y.jsx)(i.a,{item:!0,xs:12,children:Object(y.jsxs)(b.a,{contentSX:{p:2},children:[Object(y.jsx)(o.a,{onClickDownload:function(){},onClickUser:function(){},urlAddTicket:"",onUploadFile:function(){},onClickTrash:function(){},title:"Sub Partner List"}),Object(y.jsx)(S,{onClickRowItem:function(e){},loading:T,data:null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.data,cols:null===D||void 0===D||null===(t=D.data)||void 0===t?void 0:t.cols})]})})})})}}}]);
//# sourceMappingURL=25.fbf387ac.chunk.js.map